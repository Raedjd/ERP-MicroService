version: "3.9"
services:
  discovery:
    build:  ../discovery-service
    ports:
      - "8761:8761"
    image: "discovery-service"
  event:
    build: ../eventMS
    environment:
      - eureka.client.serviceUrl.defaultZone=http://discovery:8761/eureka/
    ports:
      - "8080:8080"
    image: "event-service"
  zuul:
    build: ../zuul-service
    environment:
      - eureka.client.serviceUrl.defaultZone=http://discovery:8761/eureka/
    ports:
      - "8762:8762"
    image: "zuul-service"
  entretien:
    build: ../entretienService
    restart: always
    ports:
      - 8081:8081
    depends_on:
      - mysqldb
  mysqldb:
      image: "mysql:latest"
      restart: always
      ports:
        - 3306:3306
      environment:
        MYSQL_DATABASE: entretien
        MYSQL_USER: dzovi
        MYSQL_PASSWORD: 1234
        MYSQL_ROOT_PASSWORD: 1234
  employee:
    build: ../employeeServices
    restart: always
    ports:
      - 8082:8082
    depends_on:
      - mysqldb1
  mysqldb1:
      image: "mysql:latest"
      restart: always
      ports:
        - 3307:3307
      environment:
        MYSQL_DATABASE: employee
        MYSQL_USER: dzovi
        MYSQL_PASSWORD: 1234
        MYSQL_ROOT_PASSWORD: 1234
        MYSQL_TCP_PORT: 3307
  department:
    build: ../departmentService
    ports:
      - 3001:3001
    environment:
      MONGO_URL: mongodb+srv://dzoviBackend:dzovic10dhiaovic@clusteryea.495j2ja.mongodb.net/departments?retryWrites=true&w=majority
      PORT: 3001